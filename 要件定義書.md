# 要件定義書：三日坊主バスター

## 1. サービス概要

| 項目 | 内容 |
|------|------|
| サービス名 | 三日坊主バスター |
| 種別 | Webアプリ（小規模・1〜3ページ） |
| ターゲット | 個人（一般消費者） |
| コンセプト | 習慣を登録し、毎日チェックイン。達成したら褒めてくれる。サボったらSNSに自動投稿される「恥の力」で三日坊主を防止する |
| 競合優位性 | 「お金」ではなく「恥」を賭ける、唯一の習慣アプリ |

## 2. 解決する課題

- 習慣を始めても続かない（三日坊主問題）
- モチベーション維持の仕組みがない
- 既存アプリは「宣言するだけ」で強制力がない

## 3. コア戦略：デポジット方針

### 方針決定
- **金銭デポジットは実装しない**（法的リスク・開発コスト回避）
- 代替として「社会的プレッシャー」を強制力として採用
- X（Twitter）自動投稿により「サボったら恥が晒される」仕組みを構築

### 強制力の手段（優先順位順）
1. **X自動投稿**（最優先）— サボり報告が自動で投稿される
2. **ストリーク育成キャラ** — サボるとキャラが死ぬ（損失回避バイアス）
3. **グループチャレンジ** — 仲間に迷惑をかける連帯責任制（将来）
4. **人質コンテンツ** — 恥ずかしい写真が友達に送信される（将来）

## 4. 機能要件

### 4.1 習慣の登録・管理（実装済み）
- 習慣名を入力して登録（例：「走る」「料理を作る」「英会話1時間」）
- 習慣の編集・削除
- チャレンジ期間の設定（7日 / 14日 / 30日 / カスタム）

### 4.2 毎日のチェックイン（実装済み）
- 今日の習慣一覧を表示
- 各習慣に「達成!」ボタンを配置
- 達成時：褒めメッセージをランダム表示
- 午前0時で日付リセット（自動判定）

### 4.3 連続達成・ストリーク表示（実装済み）
- 連続達成日数をカウント・表示
- マイルストーン表示（3日・7日・14日・30日）

### 4.4 X（Twitter）自動投稿機能（未実装・最優先）
- X OAuth 2.0 でアカウント連携
- 投稿タイミング設定：
  - 達成時のみ / 未達成時のみ / 両方（ユーザーが選択）
- 投稿テンプレート（ユーザーがカスタム可能）：
  - 達成時：「[習慣名]達成! 🔥[N]日連続! #三日坊主バスター」
  - 未達成時：「今日は[習慣名]をサボりました... #三日坊主バスター」
- 投稿内容の事前プレビュー表示
- いつでもON/OFF切替・連携解除可能
- X API Free プラン（月500投稿）で運用

### 4.5 ストリーク育成キャラ（未実装）
- 連続達成日数に応じてキャラクターが成長
  - 0日: 🥚 タマゴ
  - 3日: 🐣 ヒヨコ
  - 7日: 🐥 小鳥
  - 14日: 🦅 ワシ
  - 30日: 🐉 ドラゴン
- サボるとキャラクターが死亡 → タマゴに戻る
- 死亡時のアニメーション演出

### 4.6 デポジット表示（実装済み・モックのみ）
- 擬似デポジット金額の設定（表示のみ）
- チャレンジ結果画面での達成率表示
- ※実際の決済機能は実装しない

## 5. 非機能要件

| 項目 | 内容 |
|------|------|
| デザイン | ミニマル・モダン |
| レスポンシブ | スマホ・PC両対応 |
| データ保存 | Supabase（PostgreSQL）+ localStorage（オフラインフォールバック） |
| 認証 | Supabase 匿名認証（実装済み）→ X OAuth（次期） |
| ホスティング | Cloudflare Pages |
| ドメイン | mikka-bouzu-buster.com |
| SEO/OGP | 実装済み |
| PWA | 実装済み（ホーム画面追加対応） |

## 6. 技術スタック

| レイヤー | 技術 |
|----------|------|
| 構造 | HTML5 |
| スタイル | CSS3（カスタムプロパティ活用） |
| ロジック | Vanilla JavaScript（ES6+） |
| バックエンド | Supabase（PostgreSQL + Auth + API） |
| ホスティング | Cloudflare Pages |
| バージョン管理 | Git / GitHub |
| SNS連携 | X API v2（OAuth 2.0） |

## 7. 画面構成

### P1: ダッシュボード（メイン画面）— 実装済み
- 今日の日付
- 登録済み習慣の一覧（チェックイン状態付き）
- 各習慣の連続達成日数・育成キャラ
- 「+習慣を追加」ボタン

### P2: 習慣登録・編集モーダル — 実装済み
- 習慣名の入力
- チャレンジ期間の選択
- デポジット金額の設定（モック）
- X自動投稿の設定（ON/OFF・テンプレート選択）
- 保存 / キャンセルボタン

### P3: チャレンジ結果画面 — 実装済み
- 期間終了時の達成率表示
- デポジット結果表示（モック）
- 次のチャレンジへの導線

### P4: 設定画面（未実装）
- X アカウント連携・解除
- 言語切替（日英）
- データエクスポート

## 8. 開発ロードマップ

| Sprint | 内容 | 状態 |
|--------|------|------|
| 0 | 要件定義 + フロントエンドMVP | 完了 |
| 1 | 独自ドメイン + Cloudflare Pages + SEO/PWA | 完了 |
| 2-3 | Supabase DB + 匿名認証 | 完了 |
| 4a | **X OAuth + 自動投稿機能** | **次に実装** |
| 4b | ストリーク育成キャラ | 未着手 |
| 4c | Googleログイン + プッシュ通知 | 未着手 |
| 5 | グループチャレンジ | 未着手 |
| 6 | 運用体制（Sentry, CI/CD） | 未着手 |

## 9. 将来拡張（対象外）

- グループチャレンジ（連帯責任制）
- 人質コンテンツ機能
- バッジ・称号システム
- カレンダーヒートマップ
- SNSシェアカード画像生成
- ダークモード

## 10. ビジネスモデル

| 収益源 | 詳細 |
|--------|------|
| フリーミアム | 基本無料。習慣3つまで無料 / 無制限は月額¥300 |
| 法人プラン | 企業の健康経営・研修用に月額課金 |
| ※金銭デポジット | 法的リスク（資金移動業等）のため実装しない |
